var _this=this;!function(e,v){'use strict';var a,r=e.document;a=function(){var w,x,y,z,g,c,d,h,i,j,l,A,a,m={},k={},n=!1,p={ENTER:13,ESC:27,SPACE:32},q=[];return k={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',cancel:'<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},a=function(){var b,a,d=!1,h=r.createElement('fakeelement'),f={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'otransitionend',transition:'transitionend'};for(b in f)if(h.style[b]!==v){a=f[b],d=!0;break}return{type:a,supported:d}},w=function(b){return r.getElementById(b)},m={labels:{ok:'OK',cancel:'Cancel'},delay:5e3,buttonReverse:!1,buttonFocus:'ok',transition:v,addListeners:function(d){var h,b,c,i,j,k='undefined'!=typeof y,l='undefined'!=typeof x,s='undefined'!=typeof A,t='',u=this;h=function(e){return'undefined'!=typeof e.preventDefault&&e.preventDefault(),c(e),'undefined'!=typeof A&&(t=A.value),'function'==typeof d&&('undefined'==typeof A?d(!0):d(!0,t)),!1},b=function(e){return'undefined'!=typeof e.preventDefault&&e.preventDefault(),c(e),'function'==typeof d&&d(!1),!1},c=function(){u.hide(),u.unbind(r.body,'keyup',i),u.unbind(z,'focus',j),k&&u.unbind(y,'click',h),l&&u.unbind(x,'click',b)},i=function(c){var a=c.keyCode;(a===p.SPACE&&!s||s&&a===p.ENTER)&&h(c),a===p.ESC&&l&&b(c)},j=function(){s?A.focus():!l||u.buttonReverse?y.focus():x.focus()},this.bind(z,'focus',j),this.bind(g,'focus',j),k&&this.bind(y,'click',h),l&&this.bind(x,'click',b),this.bind(r.body,'keyup',i),this.transition.supported||this.setFocus()},bind:function(d,a,b){'function'==typeof d.addEventListener?d.addEventListener(a,b,!1):d.attachEvent&&d.attachEvent('on'+a,b)},handleErrors:function(){if('undefined'!=typeof e.onerror){var f=this;return e.onerror=function(b,a,c){f.error('['+b+' on line '+c+' of '+a+']',0)},!0}return!1},appendButtons:function(c,a){return this.buttonReverse?a+c:c+a},build:function(f){var a='',b=f.type,c=f.message,d=f.cssClass||'';switch(a+='<div class="alertify-dialog">',a+='<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>','none'===m.buttonFocus&&(a+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),'prompt'===b&&(a+='<div id="alertify-form">'),a+='<article class="alertify-inner">',a+=k.message.replace('{{message}}',c),'prompt'===b&&(a+=k.input),a+=k.buttons.holder,a+='</article>','prompt'===b&&(a+='</div>'),a+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',a+='</div>',b){case'confirm':a=a.replace('{{buttons}}',this.appendButtons(k.buttons.cancel,k.buttons.ok)),a=a.replace('{{ok}}',this.labels.ok).replace('{{cancel}}',this.labels.cancel);break;case'prompt':a=a.replace('{{buttons}}',this.appendButtons(k.buttons.cancel,k.buttons.submit)),a=a.replace('{{ok}}',this.labels.ok).replace('{{cancel}}',this.labels.cancel);break;case'alert':a=a.replace('{{buttons}}',k.buttons.ok),a=a.replace('{{ok}}',this.labels.ok);}return i.className='alertify alertify-'+b+' '+d,h.className='alertify-cover',a},close:function(g,a){var h,c,d=a&&!isNaN(a)?+a:this.delay,e=this;this.bind(g,'click',function(){h(g)}),c=function(b){b.stopPropagation(),e.unbind(this,e.transition.type,c),j.removeChild(this),j.hasChildNodes()||(j.className+=' alertify-logs-hidden')},h=function(b){'undefined'!=typeof b&&b.parentNode===j&&(e.transition.supported?(e.bind(b,e.transition.type,c),b.className+=' alertify-log-hide'):(j.removeChild(b),j.hasChildNodes()||(j.className+=' alertify-logs-hidden')))},0!==a&&setTimeout(function(){h(g)},d)},dialog:function(i,k,l,m,o){d=r.activeElement;var p=function(){j&&null!==j.scrollTop&&h&&null!==h.scrollTop||p()};if('string'!=typeof i)throw new Error('message must be a string');if('string'!=typeof k)throw new Error('type must be a string');if('undefined'!=typeof l&&'function'!=typeof l)throw new Error('fn must be a function');return this.init(),p(),q.push({type:k,message:i,callback:l,placeholder:m,cssClass:o}),n||this.setup(),this},extend:function(d){if('string'!=typeof d)throw new Error('extend method must have exactly one paramter');return function(a,b){return this.log(a,d,b),this}},hide:function(){var e,a=this;q.splice(0,1),0<q.length?this.setup(!0):(n=!1,e=function(b){b.stopPropagation(),a.unbind(i,a.transition.type,e)},this.transition.supported?(this.bind(i,this.transition.type,e),i.className='alertify alertify-hide alertify-hidden'):i.className='alertify alertify-hide alertify-hidden alertify-isHidden',h.className='alertify-cover alertify-cover-hidden',d.focus())},init:function(){r.createElement('nav'),r.createElement('article'),r.createElement('section'),null==w('alertify-cover')&&(h=r.createElement('div'),h.setAttribute('id','alertify-cover'),h.className='alertify-cover alertify-cover-hidden',r.body.appendChild(h)),null==w('alertify')&&(n=!1,q=[],i=r.createElement('section'),i.setAttribute('id','alertify'),i.className='alertify alertify-hidden',r.body.appendChild(i)),null==w('alertify-logs')&&(j=r.createElement('section'),j.setAttribute('id','alertify-logs'),j.className='alertify-logs alertify-logs-hidden',r.body.appendChild(j)),r.body.setAttribute('tabindex','0'),this.transition=a()},log:function(e,a,b){var c=function(){j&&null!==j.scrollTop||c()};return this.init(),c(),j.className='alertify-logs',this.notify(e,a,b),this},notify:function(d,a,f){var c=r.createElement('article');c.className='alertify-log'+('string'==typeof a&&''!==a?' alertify-log-'+a:''),c.innerHTML=d,j.appendChild(c),setTimeout(function(){c.className+=' alertify-log-show'},50),this.close(c,f)},set:function(c){if('object'!=typeof c&&c instanceof Array)throw new Error('args must be an object');for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d])},setFocus:function(){A?(A.focus(),A.select()):c.focus()},setup:function(b){var e,d=q[0],f=this;n=!0,e=function(b){b.stopPropagation(),f.setFocus(),f.unbind(i,f.transition.type,e)},this.transition.supported&&!b&&this.bind(i,this.transition.type,e),i.innerHTML=this.build(d),z=w('alertify-resetFocus'),g=w('alertify-resetFocusBack'),y=w('alertify-ok')||v,x=w('alertify-cancel')||v,c='cancel'===m.buttonFocus?x:'none'===m.buttonFocus?w('alertify-noneFocus'):y,A=w('alertify-text')||v,l=w('alertify-form')||v,'string'==typeof d.placeholder&&''!==d.placeholder&&(A.value=d.placeholder),b&&this.setFocus(),this.addListeners(d.callback)},unbind:function(d,a,b){'function'==typeof d.removeEventListener?d.removeEventListener(a,b,!1):d.detachEvent&&d.detachEvent('on'+a,b)}},{alert:function(d,a,b){return m.dialog(d,'alert',a,'',b),this},confirm:function(d,a,b){return m.dialog(d,'confirm',a,'',b),this},extend:m.extend,init:m.init,log:function(d,a,b){return m.log(d,a,b),this},prompt:function(e,a,b,c){return m.dialog(e,'prompt',a,b,c),this},success:function(c,a){return m.log(c,'success',a),this},error:function(c,a){return m.log(c,'error',a),this},set:function(b){m.set(b)},labels:m.labels,debug:m.handleErrors}},'function'==typeof define?define([],function(){return new a}):'undefined'==typeof e.alertify&&(e.alertify=new a)}(this);const baseUrl='https://kodilla.com/pl/bootcamp-api',myHeaders={"X-Client-Id":'3053',"X-Auth-Token":'53265a363554aa1ad6d9d3f54ac1e40e'},setupCards=(a,b)=>{b.forEach((b)=>{let c=new Card(b.id,b.name,b.bootcamp_kanban_column_id);a.addCard(c)})},setupColumns=(a)=>{a.forEach((a)=>{let b=new Column(a.id,a.name);board.addColumn(b),setupCards(b,a.cards)})};$.ajaxSetup({headers:myHeaders}),$.ajax({url:baseUrl+'/board',method:'GET',success:(a)=>{setupColumns(a.columns)}});const rememberPosition=(a,b)=>{$.ajax({url:baseUrl+'/card/'+_this.itemId,type:'PUT',data:{name:b,bootcamp_kanban_column_id:_this.targetId}})},board={name:'Kanban Board',$element:$('#board .column-container'),addColumn(a){this.$element.append(a.$element),this.initSortable(),this.initSortableColumn()},initSortable(){$('.column-card-list').sortable({connectWith:'.column-card-list',placeholder:'card-placeholder',receive:function(a,b){itemId=b.item.get(0).id,itemText=b.item.get(0).innerText,targetId=b.item.get(0).parentNode.parentNode.id,rememberPosition(itemId,itemText,targetId)}}).disableSelection()},initSortableColumn(){$('.column-container').sortable({connectWith:'.column-container',placeholder:'column-placeholder'}).disableSelection()}};$('.create-column').click(()=>{let a='';alertify.prompt('Enter column name',function(b,c){if(a=c,b){if(''==a)return alertify.alert('You have to enter the column name'),!1;$.ajax({url:baseUrl+'/column',method:'POST',data:{name:a},success:function(b){let c=new Column(b.id,a);board.addColumn(c)}})}else return!1})});class Card{constructor(a,b){this.id=a,this.name=b||'No name given',this.$element=this.createCard()}createCard(){const a=$('<li>').attr('id',this.id).addClass('card'),b=$('<p>').addClass('card-description').text(this.name),c=$('<button>').addClass('card-btn-delete').html('<i class="fa fa-trash" aria-hidden="true"></i>'),d=$('<button>').addClass('card-btn-edit').html('<i class="fa fa-pencil" aria-hidden="true"></i>');return c.on('click',this.removeCard.bind(this)),d.on('click',this.editCard.bind(this)),a.append(b).append(c).append(d),a}removeCard(){$.ajax({url:baseUrl+'/card/'+this.id,method:'DELETE',success:()=>{this.$element.remove()}})}editCard(){let a='';alertify.prompt('Enter new card name',(b,c)=>{if(b){if(a=c,''==a)return alertify.alert('You have to enter the card name'),!1;$.ajax({url:baseUrl+'/card/'+this.id,method:'PUT',data:{name:a,bootcamp_kanban_column_id:$(this.$element).parent().parent().attr('id')},success:()=>{this.$element.children('.card-description').text(a),this.name=a}})}else return!1})}}$('document').ready(()=>{const a=$('<p>').appendTo('#clock'),b=$('<p>').appendTo('#clock'),c=()=>{let d=new Date,e=d.getDate(),f=10>d.getMonth()?'0'+(d.getMonth()+1):d.getMonth(),g=d.getFullYear(),h=d.getHours(),i=10>d.getMinutes()?'0'+d.getMinutes():d.getMinutes(),j=10>d.getSeconds()?'0'+d.getSeconds():d.getSeconds();a.text(e+'/'+f+'/'+g),b.text(h+':'+i+':'+j),setTimeout(()=>{c()},1e3)};c()});class Column{constructor(a,b){this.name=b||'No name given',this.id=a,this.$element=this.createColumn()}createColumn(){const a=$('<div>').attr('id',this.id).addClass('column'),b=$('<h2>').addClass('column-title').text(this.name),c=$('<ul>').addClass('column-card-list'),d=$('<button>').addClass('col-btn-delete').html('<i class="fa fa-trash" aria-hidden="true"></i>'),e=$('<button>').addClass('add-card').text('+'),f=$('<button>').addClass('column-edit').html('<i class="fa fa-pencil" aria-hidden="true"></i>');return d.on('click',this.removeColumn.bind(this)),e.on('click',this.createCard.bind(this)),f.on('click',this.editColumn.bind(this)),a.append(b).append(d).append(e).append(c).append(f),a}addCard(a){this.$element.children('ul').append(a.$element)}removeColumn(){$.ajax({url:baseUrl+'/column/'+this.id,method:'DELETE',success:()=>{this.$element.remove()}})}createCard(){let a='';console.log(this),alertify.prompt('Enter card name',(b,c)=>{if(b){if(a=c,''==a)return alertify.alert('You have to enter the card name'),!1;event.preventDefault(),$.ajax({url:baseUrl+'/card',method:'POST',data:{name:a,bootcamp_kanban_column_id:this.id},success:(b)=>{let c=new Card(b.id,a);console.log(this),this.addCard(c)}})}else return!1})}editColumn(){let a='';alertify.prompt('Enter new column name',(b,c)=>{if(b){if(a=c,''==a)return alertify.alert('You have to enter the column name'),!1;$.ajax({url:baseUrl+'/column/'+this.id,method:'PUT',data:{name:a},success:()=>{this.$element.children('.column-title').text(a),this.name=a}})}else return!1})}}function reset(){$('#toggleCSS').attr('href','css/alertify.core.css'),alertify.set({labels:{ok:'OK',cancel:'Cancel'},delay:5e3,buttonReverse:!1,buttonFocus:'ok'})}